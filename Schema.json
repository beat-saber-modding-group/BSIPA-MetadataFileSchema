{
  "definitions": {
    "semver": {
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$"
    },
    "verrange": {
      "type": "string",
      "pattern": "^(?:[~\\^*]=?)?(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?(?:-(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?)?"
    },
    "url": {
      "type": "string",
      "pattern": "https?://(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,}(/[-a-zA-Z0-9@:%_\\+.~#?&//=]*)?"
    },
    "id": {
      "type": "string",
      "pattern": "^[0-9A-Za-z_.-]+$"
    }
  },
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "title": "root",
  "required": ["id", "name", "version", "gameVersion", "description", "author"],
  "properties": {
    "id": {
      "$id": "#/properties/id",
      "$ref": "#/definitions/id",
      "title": "Mod ID",
      "description": "Unique ID used my BeatMods2 and other mods to identify this mod"
    },
    "name": {
      "$id": "#/properties/name",
      "type": "string",
      "title": "Mod Name",
      "pattern": "^[^\\n\\r\\t]+$"
    },
    "version": {
      "$id": "#/properties/version",
      "$ref": "#/definitions/semver",
      "title": "Mod Version",
      "description": "Version according to the semantic versioning specification"
    },
    "gameVersion": {
      "$id": "#/properties/gameVersion",
      "type": "string",
      "title": "Game Version",
      "description": "Beat Saber version this mod was designed for"
    },
    "description": {
      "$id": "#/properties/description",
      "type": "array",
      "title": "Mod Description",
      "items": {
        "type": "string",
        "pattern": "^[^\\n\\r]*$"
      }
    },
    "author": {
      "$id": "#/properties/author",
      "type": "string",
      "title": "Mod Author"
    },
    "dependsOn": {
      "$id": "#/properties/dependsOn",
      "type": "object",
      "title": "Dependencies",
      "description": "Other mods this mod depends on mapped by ID",
      "patternProperties": {
        "^[0-9A-Za-z_.-]+$": {
          "$ref": "#/definitions/verrange",
          "description": "Version range according to the semantic versioning specification"
        }
      }
    },
    "conflictsWith": {
      "$id": "#/properties/conflictsWith",
      "type": "object",
      "title": "Incompatibilities",
      "description": "Other mods this mod conflicts with mapped by ID",
      "patternProperties": {
        "^[0-9A-Za-z_.-]+$": {
          "$ref": "#/definitions/verrange",
          "description": "Version range according to the semantic versioning specification"
        }
      }
    },
    "loadAfter": {
      "$id": "#/properties/loadAfter",
      "type": "array",
      "description": "Mods to load before this one",
      "items": {
        "$ref": "#/definitions/id",
        "description": "Mod ID"
      },
      "uniqueItems": true
    },
    "loadBefore": {
      "$id": "#/properties/loadBefore",
      "type": "array",
      "description": "Mods to load after this one",
      "items": {
        "$ref": "#/definitions/id",
        "description": "Mod ID"
      },
      "uniqueItems": true
    },
    "features": {
      "$id": "#/properties/features",
      "type": "array",
      "title": "Mod Features",
      "description": "Features to enable for this mod",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "icon": {
      "$id": "#/properties/icon",
      "type": "string",
      "title": "Mod Icon",
      "description": "PNG icon for this mod",
      "format": "uri",
      "pattern": ".*\\.png"
    },
    "links": {
      "$id": "#/properties/links",
      "type": "object",
      "title": "Links",
      "description": "Links associated with this mod",
      "properties": {
        "project-home": {
          "$id": "#/properties/links/properties/project-home",
          "$ref": "#/definitions/url",
          "title": "Home",
          "description": "Link to the mod homepage (same as project-source if not specified)"
        },
        "project-source": {
          "$id": "#/properties/links/properties/project-source",
          "$ref": "#/definitions/url",
          "title": "Source",
          "desccription": "Link to the mod source (same as project-home if not specified)"
        },
        "donate": {
          "$id": "#/properties/links/properties/donate",
          "$ref": "#/definitions/url",
          "title": "Donation",
          "description": "Link to a donation page"
        }
      }
    }
  }
}
